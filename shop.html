<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>Order to save the planet</title>
    <link rel="stylesheet" href="student1_style.css"> 
</head>
<body>

    <header>
        <img src="Untitled-1-removebg-preview.png" alt="My Logo" class="logo">
    </header>

    <nav>
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="shop.html" class="active">Shop</a></li>
            <li><a href="#">User Profile</a></li>
            <li><a href="#">Feedback</a></li>
            <li><a href="#">About Us</a></li>
        </ul>
    </nav>
    
    <div class="dropdown"><br>
        <label for="options"> Select what you need to buy:</label><br> <!-- This helps users to find products they want easier -->
        <select name="useroption" id="options">
            <option value="all">All items</option>
            <option value="tshirt">T-Shirts</option>
            <option value="bag">Bags</option>
            <option value="book">Books</option>
        </select>      
    </div>

    <div class="container" id="showcase"> <!-- products showcase -->
        <div class="product-showcase">
            <div class="box" id="bag1">
                <div class="image_box">
                    <img src="rebagg.png" alt="Reusable bag">
                    <div class="price">$30</div>
                </div>
                <div class="product-details"> 
                    <h3>Reusable Bag</h3> <p>Use Re-Bag to carry your groceries</p><br><br>
                    <label for="custom1">Red:</label>
                    <input type="radio" id ="custom1" name="custom" value="Red">
                    <label for="custom2">Purple:</label>
                    <input type="radio" id="custom2" name="custom" value="Purple"><br><br>
                    <label for="number1">Number of items:</label><br>
                    <input type="number" id="number1" value="1" min="1" >
                    <button class="add-to-cart">Add to Cart</button></div> 
            </div>
            <div class="box" id="tshirt1" >
                <div class="image_box">
                    <img src="bplanet.png" alt="T-Shirts">
                    <div class="price">$30</div>
                </div>
                <div class="product-details">
                    <h3> T-Shirt - No planet B</h3> <p>There is no planet B.</p> <br>
                    <label for="custom3">Red:</label>
                    <input type="radio" id ="custom3" name="custom" value="Red">
                    <label for="custom4">Purple:</label>
                    <input type="radio" id="custom4" name="custom" value="Purple"><br><br><br>
                    <label for="number2">Number of items:</label><br>
                    <input type="number" id="number2" value="1" min="1"> 
                    <button class="add-to-cart">Add to Cart</button>
                    </div>
            </div>
            <div class="box" id="book1">
                <div class="image_box">
                    <img src="climate_change_book.jpg" alt="Book">
                    <div class="price">$20</div>
                </div>
                <div class="product-details">
                    <h3>Book - Climate change simplified</h3> <p>Book by Alexa Ingram</p><br><br><br>
                        <label for="number3">Number of items:</label><br>
                        <input type="number" id="number3" value="1" min="1"> 
                        <button class="add-to-cart">Add to Cart</button>
                        </div>
            </div>
        </div>
        <div class="product-showcase">
            <div class="box" id="tshirt2">
                <div class="image_box">
                    <img src="belive2.png" alt="T-Shirt">
                    <div class="price">$10</div>
                
                </div>
                <div class="product-details">
                    <h3>T-Shirt - Climate change</h3> <p>Climate change doensn't belive in you either.</p><br>
                    <label for="custom5">Red:</label>
                    <input type="radio" id ="custom5" name="custom" value="Red">
                    <label for="custom6">Purple:</label>
                    <input type="radio" id="custom6" name="custom" value="Purple"><br><br>
                    <label for="number4">Number of items:</label>
                    <input type="number" id= "number4" value="1" min="1" >
                    <button class="add-to-cart">Add to Cart</button> </div> 
            </div>
            <div class="box" id="book2">
                <div class="image_box">
                    <img src="Rescue_planet.jpeg" alt="Book">
                    <div class="price">$50</div>
                </div>
                <div class="product-details">
                    <h3>Book - Rescuing the planet</h3> <p>Book by Tony hiss</p> <br><br><br>
                    <label for="number5">Number of items:</label>
                    <input type="number" id="number5" value="1" min="1">
                    <button class="add-to-cart">Add to Cart</button></div>
            </div>
            <div class="box" id="book3">
                <div class="image_box">
                    <img src="Net_zero.jpg" alt="Book">
                    <div class="price">$50</div>
                </div>
                <div class="product-details">
                    <h3>Book - Climate Change and road to net zero</h3> <p>Book by Mathew Waugh</p><br><br>
                    <label for="number6">Number of items:</label>
                    <input type="number" id="number6" value="1" min="1">
                    <button class="add-to-cart">Add to Cart</button></div>
            </div>
        </div>
        <div class="product-showcase">
            <div class="box" id="tshirt3">
                <div class="image_box">
                    <img src="smile.png" alt="T-Shirt">
                    <div class="price">$20</div>
                
                </div>
                <div class="product-details">
                    <h3>T-shirt - Make planet smile</h3> <p>Make me smile again.</p><br><br>
                    <label for="custom7">Red:</label>
                    <input type="radio" id ="custom7" name="custom" value="Red">
                    <label for="custom8">Purple:</label>
                    <input type="radio" id="custom8" name="custom" value="Purple"><br><br>
                    <label for="number7">Number of items:</label>
                    <input type="number" id="number7" value="1" min="1" >
                    <button class="add-to-cart">Add to Cart</button> </div> 
            </div>
            <div class="box" id="book4">
                <div class="image_box">
                    <img src="sustainbility.jpg" alt="Book">
                    <div class="price">$40</div>
                </div>
                <div class="product-details">
                    <h3>Book - sustainbility and climate change</h3> <p>Book by Mary</p> <br><br><br>
                    <label for="number8">Number of items:</label>
                    <input type="number" id="number8" value="1" min="1"> 
                    <button class="add-to-cart">Add to Cart</button></div>
            </div>
            <div class="box" id="tshirt4">
                <div class="image_box">
                    <img src="climate_chnage_is_real1.png" alt="T-shirt">
                    <div class="price">$30</div>
                </div>
                <div class="product-details">
                    <h3>T-Shirt - Climate change is real</h3> <p>Climate change is real.</p><br>
                    <label for="custom9">Red:</label>
                    <input type="radio" id ="custom9" name="custom" value="Red">
                    <label for="custom10">Purple:</label>
                    <input type="radio" id="custom10" name="custom" value="Purple"><br><br>
                    <label for="number9">Number of items:</label>
                    <input type="number" id="number9" value="1" min="1" >
                    <button class="add-to-cart">Add to Cart</button></div>       
            </div>
        </div>
        <div class="order-summary" id="order-summary"> <!-- This contains summery of order -->
            <h2>Order Summary</h2>
            <ul id="cart-items"></ul>
            <p>Total:$<span id="total-price">0.00</span></p>
            <div class="button-container">
                <button id="clearcart-button">Empty cart</button>
                <button id="checkout-button">Checkout</button>
            </div>
        </div>
    </div>
    <footer class="footertext">
        <div class="pageeditor">
           <p><a href="dulshanya.html" target="_blank">Page Editor</a></p>
        </div>
        <div>
            <p>Â© 2024 CLIMETA</p>

        </div>
    </footer>
    <script>
        document.getElementById("checkout-button").addEventListener("click", function() {
            const cartItems = document.getElementById('cart-items');
            if (cartItems.children.length === 0) {
                alert("Please add some products to your cart before checking out.");
                return;
            }
            window.open("shop_form.html", "_target");
        });
    
        const dropdown = document.getElementById('options'); //add  event listner to drop down menu
        dropdown.addEventListener('change', function(event) {
            const selectedValue = event.target.value;
            const products = document.querySelectorAll('.box');
            if (selectedValue === "all") {
                products.forEach(product => {
                    product.style.display = "block";
                });
                return;
            }
            // Display user selected category and hide other products
            products.forEach(product => {
                if (product.id.startsWith(selectedValue)) {
                    product.style.display = "block";
                } else {
                    product.style.display = "none";
                }
            });
        });
        // Add event listeners to all "Add to Cart" buttons
        const addToCartButtons = document.querySelectorAll('.add-to-cart');
        addToCartButtons.forEach(button => {
            button.addEventListener('click', function(event) {
                const productBox = event.target.closest('.box');
                const productName = productBox.querySelector('h3').textContent;
                const quantityInput = productBox.querySelector('input[type="number"]');
                const quantity = parseInt(quantityInput.value);
                const price = parseFloat(productBox.querySelector('.price').textContent.replace('$', ''));
                const total = price * quantity;
    
                const customizationInputs = productBox.querySelectorAll('input[type="radio"]:checked');  // Get customization details
                let customizationDetails = '';
    
                customizationInputs.forEach(input => {
                    customizationDetails += input.value + ', ';
                });
    
                customizationDetails = customizationDetails.slice(0, -2);  // Remove trailing comma and space
    
                if (customizationDetails === '') {   
                    customizationDetails = 'None'; 
                } 
                // If no customization is selected or if the customization not avaliable, display "None"
    
                addToCart(productName, quantity, total, customizationDetails);  // Call the addToCart function with the product details
            });
        });
    
        function addToCart(productName, quantity, total, customizationDetails) {
            const cartItems = document.getElementById('cart-items');
    
            const listItem = document.createElement('li'); // creating new element li
    
            // container for product description and remove button
            const productContainer = document.createElement('div');
            productContainer.classList.add('cart-item');
    
            // Product description
            const productDescription = document.createElement('span');
            productDescription.textContent = `${productName} (Customization: ${customizationDetails}) x${quantity} - $${total.toFixed(2)}`;
    
            productContainer.appendChild(productDescription);
    
            // Remove button to remove items one by one
            const removeButton = document.createElement('button');
            removeButton.classList.add('remove-button');
            removeButton.addEventListener('click', function() {
                const currentTotal = parseFloat(document.getElementById('total-price').textContent);
                const totalPriceString = (currentTotal - total).toFixed(2);
                localStorage.setItem('totalPrice', totalPriceString);
    
                // Update total price
                const totalElement = document.getElementById('total-price');
                totalElement.textContent = totalPriceString;
                cartItems.removeChild(listItem);
            });
    
            // Add remove button to container
            productContainer.appendChild(removeButton);
    
            listItem.appendChild(productContainer);
            cartItems.appendChild(listItem);
    
            // Update total price
            const totalElement = document.getElementById('total-price');
            const currentTotal = parseFloat(totalElement.textContent);
            totalElement.textContent = (currentTotal + total).toFixed(2);
    
            // Store the updated total in local storage
            const totalPriceString = (currentTotal + total).toFixed(2);
            localStorage.setItem('totalPrice', totalPriceString);
        }
    
        // Add event listener for the "Empty cart" button
        document.getElementById("clearcart-button").addEventListener("click", function() {
            const cartItems = document.getElementById('cart-items');
            const totalElement = document.getElementById('total-price');
    
            // Clear the cart items and reset the total price
            cartItems.innerHTML = '';
            totalElement.textContent = '0.00';
            localStorage.setItem('totalPrice', '0.00');
        });
    </script>  
</body>        
</html>